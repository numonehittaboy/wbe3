import{u as R,v as M,x as _,y as q,p as H,z as O,h as W,C as x,D as $,E as U,k as z,F as G,G as B,c as V,H as J,M as j,J as K,g as Q}from"./index-j81mEYxC.js";function Y(){const e=R("back");return e.addEventListener("click",async()=>{await M.set({should_animate_main:1});const t=_(await M.get("previous_account"));await M.delete("previous_account");const s=document.getElementById("auth-pages");s.classList.add("auth-pages-exit"),await q(),s.classList.add("auth-pages-exiting"),await H(200),O(t)}),e}function S(e,t){if(!e?.parentNode)return-1;if(t)return Array.from(e.parentNode.childNodes).indexOf(e);let s=0;for(;(e=e.previousElementSibling)!==null;)++s;return s}function T(e,t){return z.isRTL&&(e=-e),`translate3d(${e}px, ${t}px, 0)`}const Z={callback:(e,t,s)=>{const d=t.getBoundingClientRect().width,o=[e,t];return s&&o.reverse(),o[0].style.filter="brightness(80%)",o[0].style.transform=T(-d*.25,0),o[1].style.transform=T(d,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",e.style.filter="",()=>{t.style.transform=t.style.filter=""}},animateFirst:!1},X={callback:(e,t,s)=>{const d=t.getBoundingClientRect().width,o=[e,t];return s&&o.reverse(),o[0].style.transform=T(-d,0),o[1].style.transform=T(d,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",()=>{t.style.transform=""}},animateFirst:!1},C={callback:(e,t,s)=>{const d=t.getBoundingClientRect().width,o=[e,t],m=["slide-right","slide-left"];return s&&(o.reverse(),m.reverse()),o[0].style.transform=T(-d,0),o[1].style.transform=T(d,0),e.classList.add("active",m[0]),t.classList.add(m[1]),e.offsetWidth,e.style.transform="",e.classList.remove(m[0]),()=>{t.style.transform="",t.classList.remove(m[1])}},animateFirst:!1},tt={navigation:Z,premiumTabs:C,tabs:X},et=e=>{let{content:t,type:s,transitionTime:d,onTransitionEnd:o,onTransitionStart:m,onTransitionStartAfter:A,isHeavy:y=!0,once:P=!1,withAnimationListener:L=!0,listenerSetter:w,animateFirst:I=!1}=e;const v=s,{callback:l,animateFirst:n}=tt[v]||{};t.dataset.animation=v,n!==void 0&&(I=n);const u=new Map;let c,a=null;if(L){const i=l?"transitionend":"animationend",f=p=>{W(p),!(p.target.parentElement!==t||(u.get(p.target)?.(),p.target!==a))&&(!c&&y||(c&&(c.resolve(),c=void 0),o?.(g.prevId()),t.classList.remove("animating","backwards","disable-hover"),P&&(w?w.removeManual(t,i,f):t.removeEventListener(i,f),a=c=void 0,u.clear())))};w?w.add(t)(i,f):t.addEventListener(i,f)}function g(i,f=!0,p){p&&(a=p),i instanceof HTMLElement&&(i=S(i));const E=g.prevId();if(i===E)return!1;m?.(i);const r=t.children[i];if((!x.isAvailable("animations")||E===-1&&!I)&&(f=!1),!L){const h=t.dataset.timeout;h!==void 0&&clearTimeout(+h),delete t.dataset.timeout}if(!f){a?a.classList.remove("active","to","from"):r&&u.get(r)?.(),r&&(r.classList.remove("to","from"),r.classList.add("active")),t.classList.remove("animating","backwards","disable-hover"),a=r,o?.(i);return}L||(t.dataset.timeout=""+window.setTimeout(()=>{r.classList.remove("to"),a&&a.classList.remove("from"),t.classList.remove("animating","backwards","disable-hover"),delete t.dataset.timeout},d)),a&&(a.classList.remove("to"),a.classList.add("from")),t.classList.add("animating");const F=E<i;t.classList.toggle("backwards",!F);let D;if(r&&(l?D=l(r,a,F):r.classList.add("active"),A?.(i),r.classList.remove("from"),r.classList.add("to")),r){const h=r.dataset.transitionTimeout;h&&clearTimeout(+h),u.set(r,()=>{r.classList.remove("to"),u.delete(r)})}if(a){let h;const k=a,b=()=>{clearTimeout(h),k.classList.remove("active","from"),D?.(),u.delete(k)};r?(h=window.setTimeout(b,d+100),u.set(k,b)):(h=window.setTimeout(b,d+100),u.set(k,()=>{clearTimeout(h),u.delete(k)})),k.dataset.transitionTimeout=""+h,y&&(c||(c=$()),U(c,d*2))}a=r}return g.prevId=()=>a?S(a):-1,g.getFrom=()=>a,g.setFrom=i=>a=i,g};function st(e,t,s,d,o=200,m,A){const y=et({content:t,type:e||t.dataset.animation==="tabs"?"tabs":"navigation",transitionTime:o,onTransitionEnd:d,listenerSetter:A});if(!e)return y;const P=new Proxy(y,{apply:(v,l,n)=>{const u=n[1]!==void 0?n[1]:!0;let c,a;n[0]instanceof HTMLElement?(c=S(n[0]),a=n[0]):(c=+n[0],a=e.querySelector(`[data-tab="${c}"]`)||e.children[c]),L(a,c,u)}}),L=async(v,l,n=!0)=>{const u=t.children[l];if(s){const i=s(l,u,n),f=i instanceof Promise?await i:i;if(f!==void 0&&!f)return}m&&m.scrollIntoViewNew({element:v.parentElement.children[l],position:"center",forceDirection:n?void 0:G.Static,forceDuration:o,axis:"x"}),x.isAvailable("animations")||(n=!1);const c=y.prevId();if(v.classList.contains("active")||l===c)return!1;const a=n?B:i=>i(),g=e.querySelector(I.toLowerCase()+".active");g&&a(()=>{g.classList.remove("active")}),w&&c!==-1&&n&&a(()=>{const i=v.querySelector("i"),f=v.parentElement.children[c].querySelector("i");f.classList.remove("animate"),i.classList.remove("animate");const p=f.parentElement.parentElement.offsetLeft-i.parentElement.parentElement.offsetLeft,E=f.clientWidth/i.clientWidth;i.style.transform=`translate3d(${p}px, 0, 0) scale3d(${E}, 1, 1)`,B(()=>{i.classList.add("animate"),i.style.transform="none"})}),a(()=>{v.classList.add("active")}),y(l,n)},w=!e.classList.contains("no-stripe"),I=e.firstElementChild.tagName;return V(e,v=>{let l=v.target;if(l=J(l,e),!l)return!1;let n;if(l.dataset.tab){if(n=+l.dataset.tab,n===-1)return!1}else n=S(l);L(l,n)},{listenerSetter:A}),P}class it{constructor(){this.pageId=-1,this.pagesDiv=document.getElementById("auth-pages"),this.scrollableDiv=this.pagesDiv.querySelector(".scrollable"),this.selectTab=st(null,this.scrollableDiv.querySelector(".tabs-container"),null,()=>{this.page?.onShown&&this.page.onShown()})}setPage(t){if(t.isAuthPage){this.pagesDiv.style.display="";const s=S(t.pageEl);if(this.pageId===s)return;this.selectTab(s),this.pageId=s,this.scrollableDiv&&K({container:this.scrollableDiv,element:this.scrollableDiv.firstElementChild,position:"start"})}else this.pagesDiv.style.display="none",t.pageEl.style.display="",this.pageId=-1;this.page=t}}const N=new it;j.pagesManager=N;class nt{constructor(t,s,d,o,m){this.isAuthPage=s,this.onFirstMount=d,this.onMount=o,this.onShown=m,this.pageEl=document.body.querySelector("."+t)}async mount(...t){if(this.onMount){const s=this.onMount(...t);s instanceof Promise&&await s}this.installPromise??(this.installPromise=this.install(...t)),await this.installPromise,N.setPage(this)}async install(...t){if(this.onFirstMount)try{const s=this.onFirstMount(...t);s instanceof Promise&&await s}catch(s){console.error("PAGE MOUNT ERROR:",s)}this.mountBackButtonIfAuth()}mountBackButtonIfAuth(){if(!this.isAuthPage||Q()===1)return;const t=document.getElementById("auth-pages-close");t?.style.removeProperty("display"),t?.replaceChildren(),t?.append(Y())}}export{nt as P,et as T,st as h,S as w};
//# sourceMappingURL=page-CD8Li8HN.js.map
